<div class="table-responsive">

	<table id="example" class="table table-customized table-hover">
		<thead class="">
		<tr>
			<th>First name</th>
			<th>Last name</th>
			<th>Birthday</th>
			<th>Gender</th>
			<th>Mobile phone</th>
			<th>Other phone</th>
			<th>Email</th>
			<th>Address</th>
			<th>City</th>
			<th>State</th>
			<th>Zip code</th>
			<th colspan="3"></th>
		</tr>
		</thead>

		<tbody id="myTable">
		<% @customers.order("created_at desc").each do |customer| %>
			<tr>
			<td><%= customer.first_name %></td>
			<td><%= customer.last_name %></td>
			<td><%= customer.birthday %></td>
			<td><%= customer.gender %></td>
			<td><%= customer.mobile_phone %></td>
			<td><%= customer.other_phone %></td>
			<td><%= customer.email %></td>
			<td><%= customer.address %></td>
			<td><%= customer.city %></td>
			<% CS.states(:us).each do |key, value| %>
				<% if key.to_s == customer.state %>
					<%= content_tag(:td, value) %>
					<% break %>
				<% end %>
			<% end %>
			<td><%= customer.zip_code %></td>
			<td>
				<%= button_to [customer] , class: "btn-table btn-sm px-2", method: "get" do %>
					<i class="fa fa-info-circle mt-0"></i>
				<% end %>
			</td>
			<td>
				<%= button_to [:edit, customer] , class: "btn-table btn-sm px-2", method: "get" do %>
					<i class="fa fa-pencil mt-0"></i>
				<% end %>
			</td>
			<td>
				<%= button_to [customer] , class: "btn-table btn-sm px-2", method: :delete, data: { confirm: 'Are you sure?' } do %>
					<i class="fa fa-remove mt-0"></i>
				<% end %>
			</td>
			</tr>
		<% end %>
		</tbody>
	</table>
</div>

<!--pagination-->
<div class="col-md-12 text-center">
	<ul class="pagination pagination-lg pager" id="myPager"></ul>
</div>

<!--last row-->
<div class="container-fluid"> 
	<div class="row">  
		<div class="col-xs-7 col-sm-8 col-md-9">
			<select id="selNumRows" class="mdb-select colorful-select dropdown-primary mt-2 hidden-md-down">
				<option value="" disabled >Rows number</option>
				<option value="10" selected>10 rows</option>
				<option value="25">25 rows</option>
				<option value="50">50 rows</option>
				<option value="100">100 rows</option>
			</select>
		</div>
		<div class="col-xs-3 col-sm-4 col-md-3">
		  <h4>
			<%= link_to 'New Customer', new_customer_path %>
		  </h4>
		</div>
	</div>
</div>

<script>
  $.fn.pageMe = function(opts){
		var $this = this,
		defaults = {
			perPage: 7,
			showPrevNext: false,
			hidePageNumbers: false
		},
		settings = $.extend(defaults, opts);
	
		var listElement = $this;
		var perPage = settings.perPage; 
		var children = listElement.children();
		var pager = $('.pager');
		
		if (typeof settings.childSelector!="undefined") {
			children = listElement.find(settings.childSelector);
		}
		
		if (typeof settings.pagerSelector!="undefined") {
			pager = $(settings.pagerSelector);
		}
		
		var numItems = children.size();
		var numPages = Math.ceil(numItems/perPage);

		pager.data("curr",0);
		
		if (settings.showPrevNext){
			$('<li><a href="#" class="prev_link">«</a></li>').appendTo(pager);
		}
		
		var curr = 0;
		while(numPages > curr && (settings.hidePageNumbers==false)){
			$('<li><a href="#" class="page_link">'+(curr+1)+'</a></li>').appendTo(pager);
			curr++;
		}
		
		if (settings.showPrevNext){
			$('<li><a href="#" class="next_link">»</a></li>').appendTo(pager);
		}
		
		pager.find('.page_link:first').addClass('active');
		pager.find('.prev_link').hide();
		if (numPages<=1) {
			pager.find('.next_link').hide();
		}
			pager.children().eq(1).addClass("active");
		
		children.hide();
		children.slice(0, perPage).show();
		
		pager.find('li .page_link').click(function(){
			var clickedPage = $(this).html().valueOf()-1;
			goTo(clickedPage,perPage);
			return false;
		});
		pager.find('li .prev_link').click(function(){
			previous();
			return false;
		});
		pager.find('li .next_link').click(function(){
			next();
			return false;
		});
		
		function previous(){
			var goToPage = parseInt(pager.data("curr")) - 1;
			goTo(goToPage);
		}
		
		function next(){
			goToPage = parseInt(pager.data("curr")) + 1;
			goTo(goToPage);
		}
		
		function goTo(page){
			var startAt = page * perPage,
				endOn = startAt + perPage;
			
			children.css('display','none').slice(startAt, endOn).show();
			
			if (page>=1) {
				pager.find('.prev_link').show();
			}
			else {
				pager.find('.prev_link').hide();
			}
			
			if (page<(numPages-1)) {
				pager.find('.next_link').show();
			}
			else {
				pager.find('.next_link').hide();
			}
			
			pager.data("curr",page);
			pager.children().removeClass("active");
			pager.children().eq(page+1).addClass("active");		
		}
  };

  $(document).ready(function(){
		$('#myTable').pageMe({pagerSelector:'#myPager',showPrevNext:true,hidePageNumbers:false,perPage:10});
		// El nro 10 al final de la linea anterior, indica que se va a mostrar solo 10 registros en la tabla
  });

	$("#selNumRows").change(function () {
    var input_state = document.getElementById('selNumRows').value;
    console.log(input_state);
		//document.getElementById("selNumRows").value;
	});
</script>